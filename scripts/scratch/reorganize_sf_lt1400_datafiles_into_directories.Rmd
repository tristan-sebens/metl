```{r}
library(tidyverse)

d = here::here('data', 'Lotek', 'LAT 1400-LAT 1800', 'Sablefish')
dir.exists(d)
```

```{r}
# Identify tag ID from filename
get_tag_id =
  function(fp) {
    str_extract(fp, pattern = ".*[-|_](\\d\\d\\d\\d)\\D.*", group=1)
  }

# Move lone csv to new directory named from tag id
move_to_dir = 
  function(fp) {
    f_name = str_split(fp, '\\.')[[1]][[1]]
    
    new_d = file.path(d, get_tag_id(fp))
    TAF::mkdir(new_d)
    fs::file_move(
      file.path(d, fp),
      file.path(new_d, fp)
    )
  }

list.files(d, pattern = "csv") %>% 
  lapply(
    function(fp) {
      move_to_dir(fp)
    }
  )
```


